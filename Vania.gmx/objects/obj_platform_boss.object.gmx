<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_boss_platform</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>image_speed = 0;
pause_frames = 0;
state_attack_close = 1;
state_shoot = 2;
state_sleep = 0;
state = 0;
if (x &lt; 10){
    close_attack = instance_create(x + 16, y, obj_fire_switch);
}
else {
    close_attack = instance_create(x - 16, y, obj_fire_switch);
}
close_attack.image_xscale *= 5;
vulnerable = false;
invuln_frames = 0;
max_invuln_frames = 20;
is_alive = true;
touched = false;
frames_between_shots = 120;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>601</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_execute_script</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>9</kind>
            <script>script_invuln_handler</script>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
          <argument>
            <kind>0</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (vulnerable){
    image_blend = make_color_rgb(100, 100, 100);
}
else {
    image_blend = c_white;
}
if (is_alive){
    if (!pause_frames){
        switch (state){
            case (state_sleep):{
                image_index = 0;
                close_attack.visible = false;
                if (place_meeting(x, y, obj_platform_moving_boss) &amp;&amp; vulnerable){
                    pause_frames = 90;
                    image_index = 1;
                    touched = true;
                    state++;
                }
                break;
            }        
            case(state_attack_close):{
                if (image_index != 2){
                    image_index = 2;
                    pause_frames = 110;
                    close_attack.visible = false;
                    script_switch_vulnerable_face();
                }
                else if (image_index == 2){
                    image_index = 3;
                    pause_frames = 60;
                    close_attack.visible = true;
                    state = 0;
                }
                /**if (abs(obj_platform_moving_boss.x - x) &gt; 64){
                    image_index = 0;
                    touched = false;
                    state = 0;
                    close_attack.visible = false;
                    script_switch_vulnerable_face();
                    pause_frames = 30;
                }*/
                break;
            }
            case(state_shoot):{
                close_attack.visible = false;
                if (image_index != 4){
                    image_index = 4;
                    pause_frames = 30;
                }
                else {
                    //image_index = 3;
                    pause_frames = frames_between_shots;
                    next_attack = instance_create(x, 208, obj_damage_wall);
                    with(next_attack){
                        max_move_speed = 3;
                    }
                }
                /**if (place_meeting(x, y, obj_platform_moving_boss)){
                    state = 0;
                    //script_switch_vulnerable_face();
                    //vulnerable = true;
                    image_index = 1;
                }*/
                break;
            }
        
        
        
        
        
        
        
        }
    }
    else {
        /**if (place_meeting(x, y, obj_platform_moving_boss) &amp;&amp; state == 2){
                pause_frames = 0;
                state = 0;
                image_index = 1;
            }*/ 
        if (abs(player.x - x) &lt; 120 &amp;&amp; state == 2){
            script_switch_attacker_face();
            //image_index = 0;
            pause_frames = 0;
        }
        else {
            pause_frames--;
        }
    }
    if (vulnerable){
        if (place_meeting(x, y, whipper) || place_meeting(x, y, obj_e_whipper)){
            if (!invuln_frames){
                obj_platform_boss_controller.hp--;
                total_hp = obj_platform_boss_controller.hp;
                invuln_frames = max_invuln_frames;
                if (total_hp == obj_platform_boss_controller.max_hp / 2){
                    frames_between_shots -= 20;
                }
                else if (total_hp == 3){
                    script_switch_vulnerable_face();
                    is_alive = false;
                }
                else if (total_hp == 0){
                    instance_create(player.x, player.y, obj_warp);
                    is_alive = false;
                }
            }
        }
    }
}
else {
    visible = false;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>500</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring>draw_self();</codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>408</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>-1</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_if</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>vulnerable</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_text(x - 8, y - 64, "V");
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
